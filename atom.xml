<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CHANG</title>
  
  <subtitle>所有的理想主义者都在脚踏实地</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-12-01T12:59:18.552Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Chase Liu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>宝贝若桐</title>
    <link href="http://yoursite.com/2019/11/03/%E5%AE%9D%E8%B4%9D%E8%8B%A5%E6%A1%90/"/>
    <id>http://yoursite.com/2019/11/03/%E5%AE%9D%E8%B4%9D%E8%8B%A5%E6%A1%90/</id>
    <published>2019-11-03T12:58:59.000Z</published>
    <updated>2019-12-01T12:59:18.552Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="Hey, password is required here." />    <label for="hbePass">Hey, password is required here.</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="f478767c5e9bdb7dfa31e73a97405d1ac0b695648e98843672e754b13650bf07">bf7ea7f5b9ddbeb43e68c4b887e97067c97bc3d016a8e798be680549ff157bc3a84a8b52f420e5a0bbafa022749b065dc828d48da0772556629f5784a3b5d4d31896ffd15e7c2e634f9a34c326c297da9c9ff72aa8c2fadb387f5e45d82d7d4b3ce71da24cd102e74aea0392e47b5e7a29751583d018ea1a19e128059bebded643eae88a1f349cb97e2c70a65ecb79bf633b6226a3eba1c5a968bad7758635a54943b198e49baa64326f4a86a0aa1aad1b374ebaf2b75843b333baadecc056adabad010907f5005f6997fcfbb090ba5e439fc7fddec432484008a4ece158c483a17cca0fd06b0ecb96d23b5c02f462bcf1c873be87c04407bbe64e716f2666a30df6ec198aab40830a905c1979359d8c940713816ca960c0ebf09ebb1c2afbdad15b5f6070057d2413e20ac2f56f192df0205ee34ba1afa850570c89d50eda931cd52f714e24cf0bca695e3b0f1cabb433eb27d40286b5d063ba4fb60def240a6922b682dfb9b53f1bc21a43ac92c46590f782c3205703683c3ee1f87939744b203ba27c2aeed229a8aae1c504977c6277baeb87062ba3b72760b73f619cb05dd5f085ffe5d9fa5c45f5a966fe4cc6449e30466e9269930ae8d49cf62f0f225fe8dda6d4a09a147142e2f46e33f20b3bd6bbb7dd737dc25ba6947cef917443e1bce0a02b8b5119558d192f3dc813c2b3ec48744bcef2b3e8d9893d34973024c186962527a107d451bfc35f1b2847fe6cbef0b84fdc300a4362932c9b7d96dd2087e078e6e822f15f6f34231beb0b81cea703120f8b2402e3effc802d84ea927ac0128df4a5d22ad77edbb211d49cb5e478803dfa2e30f015823b6b58dee7be4a38057ab4f4998c8d47482078b1d3e3dde862ae61a85417dda719fe5261e37ad0da6a99bfac6999c5ded0584ffb18dc5ff89d29a70cb00ecef3b614f0046036d7733f4467307484d46d62177febc145d60b6a8e4a19e2f9dad14e07a59d2d511010c10e57fb06df426b55f9bbead0d89ac8cf472d0129a9494bf206b0e6373ce666596803ec30ad67e430e9da800bf77487d9d0812e04ec32114ff18eda3c539df3698c8addc99a5d819eedaa94bb6961df1b1ce9faa1a7863d3df5f80072697a93d42e07d5838480f3f0e6ae646dc57ac3630be3e0686f14340b04444d1fda63668ba93814b4d76dbde822eeee8149b302b279742d95235da9acc3b0565f98c7bb5e2ee05af5555093842b53303c4c9efc3fae53274eb07ae5408375c7b9125995f6149164eb6bf2a2ded2a7da1fd04c606b52505ede55cf5245df8b775eb7dcb7c80269ef41f0494d9b9745b4483d136d69ce774d71ca6c120cb7e15aa827b9350d7ae6e8b2d0234d09270a61017dd4e1e7221756ec84121a9ed6b9f30941352872bbb7e37e385a057940bde11681972f34610788d85fcc1cd86f4e5e4cabd19c774150fb718234f15a5f1ee6fc53a3c8e80d0c0ac4ba2cd7863375faeb217be6bdc9801cdd338c651eae2827bd58ad46492836ac2d7ae191cf7dfca8f21cc519b78ce56189287dd2b7d969be529e3ddcdad9b8e2dc48760f868a4d47373495c43e4600a17be49992672465381084a14a1ebcf1070d93f22dd8d289d59fda804745f5cf9226efd3fb21539193f701f740950552fb4639b3f916bd613c8cc7f203fa6644e60b0b59e41a60a847712c8f076c0a4c6305455f1a1a290272e0d1364c9750ac126a31df14a0ff2b5ce534b1dbb0477a88bb67cfb31bf8f93337ff0c9dc3c89edb328ce705a810596565f31d9d4c23ee4e9397d6cb90d4c02d806b52a23a9b47c7ed509035b3e249131f40a39706b93605768fd00f0d293c03b0b3085226c099d06e5692f7231b80f706b782cf1fd2cd4db2b733bf2857a7a5d5d14eb1ca60532a4147784d20eac61d83b61caed6e9acb8b9af269a04a7b8cf83ee6877671d876c8216e0711ac52cf5aa761d0e07d0e543c19bf5c3864638447477132272ea6ff878705a698ed26ea0c1d1282732c8161e31687a8eab7ce93475826ba6613f22c273b841d37b9e9d440c298f733dd45de668b0aea8c9ccd37fd6f812640297bb87bc099a468b9cc1d5b9b524243bc442723d232395db89ab849a172348901f9a6879278218233e8f425406a17927e19ae8474e0525d5b094a3c679aa4e8bd6e308ad346b7a0f5f29f20b8133dcbc81cddc06268373735a2d171f156ddc9b98991ac138ddc016101ae96410db60e8a7041dda762bdd0816b6b5624b0cf8cac2d669adc8c1f12528644f87491409e04d048d245ecc627746d35fbb9498cfbfc77a98fe176eaf7f45a137c2160200a38f83ab8874f5fae42d9139e48f3010f3aecca168c1ebed730811177885358a1ec0551f0890d391c50c38269a39803c9a91e1ac581ec3dc5721f10d90c5926d0a666d19e40b4eb79b928c4ea97fc06a7e5b3abc205d9f0ab4f4c78d795caa370d1a796c45c3e2387400a0f591fe96cd641a670213662aae397e23cb8208d8301b0ba157fc4903a4b46ff5f984f13380dcd4eebd07d5f2077f5ef87cfad7ad15b9c8a8bb25c9554418cc20045ce2f0a757ff5476db368c68ce58eec0a1bc4c1e6c5efb3b3988abcc294a237699f9348a79f76a5895325d60aeb24e1a11224c271b35c7c2f0c0da299af01b15a54c6bb124ab026f5cdd23c05768d06ffc2c70f368a916f9581df90e71cafdd2e342f1f7df10fcdd6272294ef36ed0438284e46be67e1bddeffd0ebed55a1b3f404d4320dbf132da69e500e50bb79ac976ea6f8aecb76a917fefb97ac0933b7835e7c9c3ce50c66ff062b3785292328dec4298c57d374cbdb60c8585c2f997c2f9dd9ce256edf0f6f3028d5adac2093e77aebe4dcbf31ebbde31fc807daf43af9185aa91bdc822a85e5585b5880cd0e6f6545f5a5649ac49d7b2e694c15236f31bac2d9b14bb796fc24b57f2be51747cd46bacf33e1e39b652ece84f1e50b258287d73c72315138090e9850132a0fea99a100a9b4e0e081a102729a1b6740f9ea48a650053a3e75efd5d8a3f05a5fc8592fcdffbf3bc91ce139beed9493561d55796b15008bd16b2a1a96231c93ebaeb06f9ae21e57f9a473a65951946d810e6b5deeddfb498e1fd7c272578598a5b35f3c748332c89898c24b71b11e03ffbaf32e35a8cba82475082fce97fca29e738d0231e8c9a58e7ef7e140899576030b12a67f8d963476264569aa794361e8d044e20849a0551ee48695fbf97f515f494fd4b3d5cf2cc27151d27afd15c6bdc9dcad6b6be315cf62f031e18cb51f1307fee3ff4282da6aaea39d6648a009737e4c66aadcb6a9c86cbd9c510a7043fb8ba86a283dd0b9353c5e4b47656cfffacb2912b4a8e1621355238d5c984daec7b2aa368a414d8d8e18db0b0f2f74cbbccaa9207d77f9385e499e83a7f77ce015d2d0effeec255a916430062eeb24a5e3d37c76ba1dbe2d7c12411868743d242b0c89e952499407096b9af6ed92fd359f4f4b8b4a53927a0fd4c781684f307dcf0b01ebe1b8ee6f0950f8528ebe7a019c69beac3faa2e4451ba97518e009822174da6709012e2163f1aa5b951506af56461bb8b9132e4a68c5d8773a600689c58e7839517ef859c775423bed86855c78d6f8e4d03c4e139f9cb2682b286c304476ac1cf78a7d93b04949d7a378b918683959f365ffbe3c890adc62c67dd42a2760761064fe7df40423c1aadeb9825b1245d76a6da3730856e132988eff12a0b9c21ca765bc6109b46dae38847487c30edc205137d9d06380c5f6cc9b2cf3d9f898f8c18368c197b9c83699afc735c6448d685e4ce79c97db162577052ff477f68fe6418a9c030dda57cf54c5ed743dbbd02b9206196129c3c54980b7636de81c738527a5503e7c162c3b10471d352f501f85f9abdf9bafc3b91887613e9b24c4927ea8f9117118b6b7af45b1f363e648d42500aa113746bd5873a745e429ef842c3efcbe14cc19943e02d45be10998a7ad135bdf27b6b541e8a527609622dee79fb287dc2273eee6a34c12cbf1e127e9819f824add8afda4edd03f9ed7ec2d983db3e0fd1ac0ffc6a33c4293b6f519fe8e3c80f10f44fefcd0420dfb653d22669005a9130ff7995b169a78d8f5fe0cef24354c89efbcefc6b7d550dd1d067fd55869819216ee902805165eba2b29f74f30cce7de9da6c9ff8fe46492e30724e928e2ec1e7c7f50d0414ca7f5cf2b0f5ba1c4cc227a7f14832435cb0932edd3a765d9694b8a188dc57f60523871e9f439eb88ad8a96f1fde00f35d3c9531604e84d36511724e8d945920aa8b68437c8fd4ef7c235ddd5c9cf33c34c0983caad8b149306a8839dd1ffa72786d4f7a0d72844ceb4b9838e116a963c9429245743598a5655ec11dd448edd5e0a04deb7cdc9e49b8f73c37dd82ad34540f18b6eee8380ed97eb1a7deb408b99bf1feb7258744e7b5ea4d492ade985ac75d50b86d1dc60c8c5f68b17a2eb361a9c90fc37a1fa65f5b2a400b649dc7269f2c29989973858fb6e679162f29a7e1020219aaea6997a2a299d195506949551ea95135b502eb4d54fad8536ce6230bb9eb62c7b4ba75a5ad8c15ca004095abb3dbab8c56198120a72a7e707cae4d76eaa72aba1d813107d2a2269bbd213de7027fe61df5afe4fc6db4aa0d4e89b31dfc8dd039cc93d4b9d830610627aa472f7567d806d0ccb8d4b4c237d75efdd2b4bee4045181656878560ebc8a7a6a7d10eb7cbeebb5f1a1f7470acc39068e6faa00796c68942351c99d5a64fac58f65df9e32eaf201c655d16ca0d7336d33944d66f190ffd618f1c1d6f26d5addbfd1270d1c354d7306b645b1151fbe145064d6c817a4ad31f725a4d511ec591d4acb877a71d1129751346eb76e92641ca39fb20fedc3a2ab09fa4b6c3e1812cc4ce881703f6d373f5d6efb3bd723364b635f9ba6c0ecbaffe521b5b3ddbc3bd755e68cf36f98e0c3b059d8ea727bab1dff955c5dd6e520efa8ee02652e2bf54c254de93025ad94c3a42c76ce65a73dee820fe54d565af2232f1f064e47524978482b6cb855dc754e341d5e78136eebaa00f9f258a31ef0e14b170666ef5452eb8b4b62167af7407ab93b05344b1fe3a62b674a37045d47bc649bc6a9292a8873eb8cd2fe079b448046ae65ef37baf7aa7b7ba779b741f40bad809ac327a9ebb5eefa2087203ece0484a2afa9c9253e99d59d85ed9697de5014ea7fc4e8f57431155e0c2982f77b4577aed1a0569d364106fc783510b56cd3ec43971a2592fb27babd903702bca952f1655639d1c375d392f7475b707e5c0fb8bc6e8a030bc186cf3ae2218da38a28ea32d972037b556425c3041b2c0f3d67f630d3160988903d47ffd2803f2650e087c438f4cde5473009b36ff0d553fce93be2f19aa07cdb13e786df0d7fd0d52d2af819c67dc0a692ef9914621828a895cfbe8050c8d3bad47b5d84477ba8e95a1421dc23ed99bc43bfd625facd1b71d867ea33fe8fac5d10bf97c3a1e51a0ef3f68f169b3da030fc1f427b23331579d176c979dea32c75165c910ad81fc0f8bd6c3fe25ba10e53b1c18369768763e0212834a1d1a1abd71d48077a72b1682128913adca3511bdf4a05c1037064df7dc66661033ca325d7d90e0f6bebfffd160d249af2ce4189611f95dbb3171bfeccfe4cb902eed137650252870bda722a3c51594d3dfd89a82097c8f68772fb00c0f25df79da30f1f8c62264049e1a6db013d762182dc02343cc9ec902f6b5f56faa9553b0583e42cc518abe11207a48d063b27e82715fd2d7fe9a7c58041a39870f3a90be7241fa9c0567bfd48a120a9de7c4c66e06c5e7f1c195974ed6c3f87033e04cbd056d22c14492f108dcbfae747c36ad24ca95ef1b337e959e65b1a56fc81180ed4dfcb6da92e551ac6b4ab2b7d99e2734af3d242c08263ddfab314076b901ff29f21d909d92b36f3ca91b4ba56c06a96d9572b3dfe24e2abf172bf403365d2a0c18a7fe8e5753cc8d3c5a9783bb586b14452237168597eb2eebe50077a7e8a0107ff154d67701eda49d24fc7cf2362178c35395cdc0f7522831f97cd162a6905fe9af10053a1ade4dfeb67a725c6ce8adb4c0528c7b8f4e4b8b31bc8d95f38ff6f25e5290453c86f344794ec7c6ae9b78b59278e3fa862149f6e6a1a08e21d7bf144ea5dab6364728e999ce44019a7efdbad719066625574091d0e2eb3aecfce589ac3b939a3f9eb786797012bcefceef40122e614a179147b3c0639ec248852603d6739f5a18300dd04b752facf530a3f15d37562ee494992ee8f3034d6de002b0c73fb8cb4e2bc46f33a6d4920c6e4fd02329d3caeef9ff9930d6681ebea70e7c765d445e1fbfb8944e6da987d9e81c5381b2f85090617e71f1d058f85b4535aca0e18228168fb1159dab3d3a877faa54ca92d92801e3a5bb54709efbb660e72094f1db9cc588df0e9446efbeb3509b8009eb5960f9828b55eb97b2560735f7ff0aac05c778b2c47fbcffd284148648ef598cb890c2ff6685992166dd28d9df22eadd1c49556758f6f9aaacae076c39e39ca181f32ace8e8aa862b34b2bd2d1505c26c86ddd1bc1f86a87d1d4603785c71d383149762d73725fe4ab338fdf24aeb51ecc541101e370a645a7d85f4da654f1368b9a329f31ff6558e232be5a442188639bf7ecd0a1a771438c58fd2dc39081e0a934a00dfdf850f71549ec1692b78a5bf8cbd6ebec3c5fbca3eacfd0db860221ccb0c0781f7d9fec2083eb00d8b0cc496d90ad8fcbf15fe7b338f09dd0702beced13fbecd1a0047b6d1aad5effcbde6ea7a57eb6c92ed71e7d8a3ebfe3a18a970d8ba9fe1272a90385dfb0e73de8ce109d08bb2a85a3e1f4670c99b6a7f4ba6f9baa777b82941cc081734ed2185a6d261f094fd2ceca850e8bbe9c116232ff0e8abcb9d7b040e2a20ab786f2ae8a6c458a7650cc62ae02858e4f6e3e316d6cd3bb71d8636686500e0de52f5ab4e33dc4ce76dd8da22028358c1a10564c2079b95c55cccb59e1574b9ea6b4aaa8d8ec436a2087408321ff96c0b221a53c744358a23bcf3a8591b04c0835b08794da7df05fa85e99c35277e701d124ab8d66c537008fc919a3272bdc589127fd0c9f07f3174373fbe24ce4f922687d912e6d00f9f2b596e88508d0625df6eae640f503da8f63d83b2af80c73e4b123be4eeb322e60cd021426c53c8f6b6b16ac77e148c1a092f8a22cd7c8f3ea16f01dbc9eeaa6de5edd892d766b01c82a0225b38b97b75532b87d31be73f4bac3ee5f3cd40f19df6a6aaacb17b0d496ee9b0f857c272c03c0b004486a939e6db57f27f3c2c409250519bf5d06686c7022b2b7001f619ce00764e71bc4cfc11b7dd5ab8b177ed5df5cc3c96498bbd28d50b8668c945e0a0b296ed0c0c29c1d5e71fad7947c4eee8c8afd3e298165215635baa1f3178cb84d50c07540fdd5f1bb3ba3b8be7547acb9fb68f4951b7c75c1e0fba319596b50920c41a2eebb02d0077f0ec294608c5a07e9bd7abe07a0cad9159dbe45415aa064fe2d76358816df64a8608f699468c1baa0768f45258d955b5f4d78bc97515ede0241ab22f1525833281dbec04b91e05b9db246efd06484651b06ce44a456b45fdf232a97dfbec226ba913207b59a1022866109644e284fc0d92e17d6943c7eb22e98b8e9a988245a87562bc8deef9b87bf2fa8ef816e979c476a0ffc20d33905ed180ef652923d3e4155d9dd086e85087ede323b658c3541ae80420d0bfb7aa0cd0671184bb0b6b87bb80438b59eb74396312141f3ebedacbe6fe62028f9f3aeed1be78cb348e98015616c9060a5592fa49dfd96971f84a8f1867f360606b82dd5c82965f0cbe5ef269fa4d45087ffac43c675aec9527d28b2853f4ebd6dd753190c1234176fc1a3efac3ddbed29607ff8a370499122be8eed4474c02fe9e0f8ccdfa98e16531d37d861db9e52aa9276a04b10acf1074a4141a7cedd8a18cda66bdd8f19b5be42a2566d7fb8d44dfe5058f7b42551b40e927df6a0aeb20598e2c974307cf3efeeaed4bdbdccaa1023f0467bf5f8a6d50faed9a29e9b062013b00efd0ce85e84841064c369b135ff145eb9db994f9d5f376c91fa6076857a553b15e5ad196bdacbc7cbf861584aff4f92ab233cbba625757f173ff8e1ff092175bd69940d7ce70320dbf6d547046fc071818f6bd6532204002f3d171ccfc3ad4a1211509d1d198c2585076b80103f5bd15ac2e55eb0ae3f3277c16c5bd0ccc5165d24826b3d023dbff13cea2929c255c6126ed003f728d45cc7b5f1419c59a2d409a10062a93861984348d80232a1bd8b0027dba36672ebb34ad39932bb9a599cbcdf98f79f046207e682b1ac3b47f97670409e2bbcd3c572eea17b5626c49a85364a15dcfc7c5678779e816f2be398e40fa23e044de094e79127196290a9921a2fe1a044684188567c5efca9b487b156bc180475fadea383a33dd2cdcb01fc23a5ae9b021c18c3deab37227f3e355e67bb35d11b16e15446b62a2e844c5964611803ede8f321eedf3e65dcdfb7f197c102477db6aa9d4346f1791991ee4fd9c52a6da300acef7a4dd3aa34b77cf6447979ffafb3754fce294af68d550c5f984f7eed8f0d140e1b9f4a37fa11b0ea60f8fc3e8cf2a364e3eb3eb2017be687f05feb9a8d792d8c530768fae7d6301782764dd9556175641df06aa60ae7dc86df38</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      Here&#39;s something encrypted, password is required to continue reading.
    
    </summary>
    
    
      <category term="honey" scheme="http://yoursite.com/categories/honey/"/>
    
    
  </entry>
  
  <entry>
    <title>can2serials_lib</title>
    <link href="http://yoursite.com/2019/10/27/can2serials-lib/"/>
    <id>http://yoursite.com/2019/10/27/can2serials-lib/</id>
    <published>2019-10-27T14:43:46.000Z</published>
    <updated>2019-10-27T14:55:11.236Z</updated>
    
    <content type="html"><![CDATA[<h2 id="CAN分析仪驱动"><a href="#CAN分析仪驱动" class="headerlink" title="CAN分析仪驱动 "></a>CAN分析仪驱动 </br></h2><p>完成CAN到串口的数据解析，同时向CAN分析仪发送数据<br></p><h3 id="数据解析流程："><a href="#数据解析流程：" class="headerlink" title="数据解析流程："></a>数据解析流程：</br></h3><h3 id="1-StarReading"><a href="#1-StarReading" class="headerlink" title="1.StarReading() :  "></a>1.<code>StarReading()</code> :  </br></h3><p>开启<code>ReadSerialPort()</code>线程</br></p><h3 id="2-ReadSerialPort"><a href="#2-ReadSerialPort" class="headerlink" title="2.ReadSerialPort() :  "></a>2.<code>ReadSerialPort()</code> :  </br></h3><p>从serial读数据到<code>buffer</code>临时变量</br></p><h3 id="3-BufferInComingData"><a href="#3-BufferInComingData" class="headerlink" title="3.BufferInComingData() :  "></a>3.<code>BufferInComingData()</code> :  </br></h3><p><strong>遍历整个</strong>从串口读到的buffer，得到一帧完整的数据存于类成员<code>data_buffer_</code>（头+数据+校验位）后，按照通信协议调用<code>parse()</code>对数据含义进行解析 </br></p><h3 id="4-prase"><a href="#4-prase" class="headerlink" title="4.prase() : "></a>4.<code>prase()</code> : </br></h3><p>解析一帧完整数据的含义，根据帧ID提取数据位。如果是下位机CAN消息，用<code>canMsg_</code>结构体变量存储CAN消息，并将其写入专门存放CAN消息的buffer<code>canMsgBuf_[]</code>中</p><p>整个ReadingSerilPort套在while循环下，保证线程持续读数据，解析数据。</p><h2 id="取消字节对齐"><a href="#取消字节对齐" class="headerlink" title="取消字节对齐"></a><strong>取消字节对齐</strong></h2><p>注意宏定义及其及使用</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PACK( __Declaration__ ) __Declaration__ __attribute__((__packed__))</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">PACK(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">struct stdCanMsgPkg_t &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> header1; <span class="comment">//66</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> header2; <span class="comment">//cc</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint16_t</span> pkg_len;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> pkg_cmd; <span class="comment">//B1 stdCanMsg</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> type; <span class="comment">//frame type</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint32_t</span> frame_id;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> frame_len;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> data[<span class="number">8</span>];</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> checknum;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">PACK(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">struct inquireFilterResponsePkg_t &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> header1; <span class="comment">//66</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> header2; <span class="comment">//cc</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint16_t</span> pkg_len;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> pkg_cmd; <span class="comment">//9D inquire Filter Response </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> result;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> portNum;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> filterNum;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint32_t</span> filterID;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint32_t</span> filterMask;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> filterMode;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">uint8_t</span> checknum;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr></table></figure><h2 id="在类成员函数中开启另外一个类成员函数的线程"><a href="#在类成员函数中开启另外一个类成员函数的线程" class="headerlink" title="在类成员函数中开启另外一个类成员函数的线程"></a><strong>在类成员函数中开启另外一个类成员函数的线程</strong></h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> Can2serial::StartReading() </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (reading_status_)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//serial_port_-&gt;flush();</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// create thread to read from sensor</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">reading_status_=<span class="literal">true</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">read_thread_ptr_ = boost::<span class="built_in">shared_ptr</span>&lt;boost::thread &gt;(<span class="keyword">new</span> boost::thread(boost::bind(&amp;Can2serial::ReadSerialPort, <span class="keyword">this</span>)));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure><h2 id="解析出一帧完整的数据包"><a href="#解析出一帧完整的数据包" class="headerlink" title="解析出一帧完整的数据包"></a><strong>解析出一帧完整的数据包</strong></h2><p>注意case2 case3 中 <code>bytes_remaining</code>的应用，该变量用于保存剩余未解析数据的长度</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> Can2serial::BufferIncomingData(<span class="keyword">unsigned</span> <span class="keyword">char</span> *message, <span class="keyword">unsigned</span> <span class="keyword">int</span> length)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// add incoming data to buffer</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> ii=<span class="number">0</span>; ii&lt;length; ii++) </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">&#123;<span class="comment">// make sure bufIndex is not larger than buffer</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(buffer_index_&gt;=MAX_PKG_BUF_LEN)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">buffer_index_ = <span class="number">0</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">  <span class="built_in">printf</span>(<span class="string">"Overflowed receive buffer. Buffer cleared."</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//std::cout &lt;&lt; "bytes_remaining_...:" &lt;&lt;bytes_remaining_  &lt;&lt;std::endl;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(buffer_index_)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//nothing</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(message[ii]==HeaderByte0)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">data_buffer_[buffer_index_++]=message[ii];</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">bytes_remaining_ = <span class="number">0</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">break</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(message[ii]==HeaderByte1)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">data_buffer_[buffer_index_++]=message[ii];</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">bytes_remaining_ =<span class="number">2</span>; <span class="comment">//2 bytes pkgLen</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">buffer_index_=<span class="number">0</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line">bytes_remaining_ =<span class="number">0</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">break</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">data_buffer_[buffer_index_++]=message[ii];</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line">bytes_remaining_ --;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(bytes_remaining_==<span class="number">0</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line">package_len_ = (data_buffer_[buffer_index_<span class="number">-2</span>] &lt;&lt; <span class="number">8</span>)+data_buffer_[buffer_index_<span class="number">-1</span>] ;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line">bytes_remaining_ = package_len_;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">41</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(bytes_remaining_ &gt; <span class="number">16</span> || bytes_remaining_&lt;<span class="number">2</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">42</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">43</span></pre></td><td class="code"><pre><span class="line">buffer_index_ = <span class="number">0</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">44</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">break</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">45</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">46</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//printf("\t%x\t%x\n",data_buffer_[buffer_index_-2],data_buffer_[buffer_index_-1]);</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">47</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">48</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">break</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">49</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">default</span>:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">50</span></pre></td><td class="code"><pre><span class="line">data_buffer_[buffer_index_++]=message[ii];</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">51</span></pre></td><td class="code"><pre><span class="line">bytes_remaining_--;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">52</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(bytes_remaining_==<span class="number">0</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">53</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">54</span></pre></td><td class="code"><pre><span class="line"> <span class="comment">//std::cout &lt;&lt; "package_len_...:" &lt;&lt;package_len_ &lt;&lt; std::endl;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">55</span></pre></td><td class="code"><pre><span class="line">parse(data_buffer_,package_len_+<span class="number">4</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">56</span></pre></td><td class="code"><pre><span class="line">buffer_index_ = <span class="number">0</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">57</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">58</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">59</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">break</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">60</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">61</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">62</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">63</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure><h2 id="ntohl-，将网络字节顺序（大端模式）转换成主机顺序（intel，小端顺序）"><a href="#ntohl-，将网络字节顺序（大端模式）转换成主机顺序（intel，小端顺序）" class="headerlink" title="ntohl()，将网络字节顺序（大端模式）转换成主机顺序（intel，小端顺序）"></a><strong>ntohl()，将网络字节顺序（大端模式）转换成主机顺序（intel，小端顺序）</strong></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">case InquireFilterResponse:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">if((ntohl(inquire_filter_response_ptr_-&gt;filterID)&gt;&gt;21)!&#x3D;0)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">printf(&quot;filter_num:%x\t filterID:%x\t filterMask:%x\r\n&quot;,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">inquire_filter_response_ptr_-&gt;filterNum,ntohl(inquire_filter_response_ptr_-&gt;filterID)&gt;&gt;21,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">ntohl(inquire_filter_response_ptr_-&gt;filterMask)&gt;&gt;21);</span></pre></td></tr></table></figure><h2 id="串口初始化"><a href="#串口初始化" class="headerlink" title="串口初始化"></a><strong>串口初始化</strong></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">static bool openSerial(serial::Serial* &amp; port_ptr, std::string port_name,int baud_rate)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;这个地方传进来的是port_ptr引用,底下就可以修改了Serials对象了</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">try </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">port_ptr &#x3D; new serial::Serial(port_name,baud_rate,serial::Timeout::simpleTimeout(10)); </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">if (!port_ptr-&gt;isOpen())</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        std::stringstream output;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">        output &lt;&lt; &quot;Serial port: &quot; &lt;&lt; port_name &lt;&lt; &quot; failed to open.&quot; &lt;&lt; std::endl;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">delete port_ptr;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">port_ptr &#x3D; NULL;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">return false;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">&#125; </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">else </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">        std::stringstream output;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">        output &lt;&lt; &quot;Serial port: &quot; &lt;&lt; port_name &lt;&lt; &quot; opened successfully.&quot; &lt;&lt; std::endl;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">        std::cout &lt;&lt; output.str() &lt;&lt;std::endl;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">port_ptr-&gt;flush();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">&#125; </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">catch (std::exception &amp;e) </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">    std::stringstream output;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">    output &lt;&lt; &quot;Error  &quot; &lt;&lt; port_name &lt;&lt; &quot;: &quot; &lt;&lt; e.what();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">    std::cout &lt;&lt; output.str() &lt;&lt;std::endl;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line">    return false;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">return true;</span></pre></td></tr></table></figure><h2 id="线程锁，对CAN消息的读写操作时均需要"><a href="#线程锁，对CAN消息的读写操作时均需要" class="headerlink" title="线程锁，对CAN消息的读写操作时均需要"></a><strong>线程锁，对CAN消息的读写操作时均需要</strong></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;向canMSgBuf中写入数据</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    boost::mutex::scoped_lock lock(mutex_);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">canMsgBuf_[writeIndex_] &#x3D; canMsg_;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"> canMsgStatus[writeIndex_] &#x3D; true;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;从canMsgBuf中读数据</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">boost::mutex::scoped_lock lock(mutex_);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">msg &#x3D; canMsgBuf_[readIndex_];</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">canMsgStatus[readIndex_]&#x3D;false;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;CAN分析仪驱动&quot;&gt;&lt;a href=&quot;#CAN分析仪驱动&quot; class=&quot;headerlink&quot; title=&quot;CAN分析仪驱动 &quot;&gt;&lt;/a&gt;CAN分析仪驱动 &lt;/br&gt;&lt;/h2&gt;&lt;p&gt;完成CAN到串口的数据解析，同时向CAN分析仪发送数据&lt;br&gt;&lt;/p&gt;
&lt;h3
      
    
    </summary>
    
    
      <category term="littleAntDriverless" scheme="http://yoursite.com/categories/littleAntDriverless/"/>
    
    
      <category term="CAN" scheme="http://yoursite.com/tags/CAN/"/>
    
  </entry>
  
  <entry>
    <title>建站前言</title>
    <link href="http://yoursite.com/2019/10/27/%E5%BB%BA%E7%AB%99%E5%89%8D%E8%A8%80/"/>
    <id>http://yoursite.com/2019/10/27/%E5%BB%BA%E7%AB%99%E5%89%8D%E8%A8%80/</id>
    <published>2019-10-27T07:35:39.000Z</published>
    <updated>2019-10-27T15:42:46.280Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;花了整整一个下午加一晚上的时间来配置个人博客，从最初安装Nodejs，然后在github上部署hexo整个过程遇到了不少的坑。虽说花了不少时间，但还是学到了点东西也算值得。<br><br>&emsp;这回费这么大劲建立个人博客的目的在于：</p><ol><li>督促自己复盘每月甚至每周的生活；</li><li>每次看书或者有其它提升能力的时候，可以强迫自己写笔记记录下来，有助于思考；</li><li>每当遇到网络上搜索不到的问题，解决后记录防止以后再遇到此类问题；</li><li>记录一下自己的生活,帮助自己认清自己，也帮助其他人了解我这种社交网络小透明；</li></ol><p>*<em>The one thing in my life I did right was giving my heart to you! My life has been so much better since the day that I was lucky enough to find you. *</em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;emsp;花了整整一个下午加一晚上的时间来配置个人博客，从最初安装Nodejs，然后在github上部署hexo整个过程遇到了不少的坑。虽说花了不少时间，但还是学到了点东西也算值得。&lt;br&gt;&lt;br&gt;&amp;emsp;这回费这么大劲建立个人博客的目的在于：&lt;/p&gt;
&lt;ol&gt;
&lt;l
      
    
    </summary>
    
    
      <category term="随笔" scheme="http://yoursite.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="思考" scheme="http://yoursite.com/tags/%E6%80%9D%E8%80%83/"/>
    
  </entry>
  
</feed>
